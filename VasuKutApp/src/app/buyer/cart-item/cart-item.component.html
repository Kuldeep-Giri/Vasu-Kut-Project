<app-navbar ></app-navbar>
<div class="container-fluid mt-2">
  <div class="address">
    <div class="container mt-4">
      <h2 class="mb-3 text-center">Cart Page</h2>
  
      <div class="" *ngIf="address.length ">
        <label class="form-label fw-bold">Please Select  Address:</label>
        <div class="address-list">
          <div *ngFor="let address of (showAll ? address : address.slice(0, 2)); let i = index" 
               class="card mb-2 p-2  {{ selectedAddressId === address.id ? 'border-primary' : '' }}">
    
            <div class="form-check">
              <input class="form-check-input" type="radio" 
                     [value]="address.id" 
                     [checked]="selectedAddressId === address.id" 
                     (change)="onAddressSelect(address.id)" 
                     name="addressRadio">
              <label class="form-check-label w-100">
                <strong>{{ address.name }}</strong> ({{ address.mobile }})
                {{ address.streetAddress }}, {{ address.district }}, {{ address.state }}, {{ address.zipCode }}
              </label>
            </div>
          </div>
        </div>
    
        <!-- Show More Button -->
        <p *ngIf="address.length > 1" class="text-center" (click)="toggleShowAll()" style="cursor: pointer;">
          {{ showAll ? 'View Less' : 'View More' }}
        </p>
      </div>
      <div class="d-flex justify-content-end" *ngIf="!address.length ">
        <h4 routerLink="/address" class="text-primary fs-6 underline" style="cursor: pointer;">+Add Address</h4>
      </div>
    </div>
    
  </div>
  <div class="text-center">
    <div class="mt-5" *ngIf="!cartItems.length">
      <p>Your cart is empty.</p>

    </div>
  </div>
<div class="row">
  <div class="col-md-9">
    <div class="cart-item  p-2">
      <div class="row g-0 " *ngFor="let cartItem of cartItems" style="box-shadow: 0 1px 1px 0 rgba(0, 0, 0, .2) ;">
        <!-- Product Image -->
        <div class="col-md-3 text-center">
          <img
          *ngIf="cartItem.imageUrl"
          [src]="imageUrl + cartItem.imageUrl"
            alt="Product Image"
            class="img-fluid product-image mt-2"
          />
        </div>
    
        <!-- Product Details -->
        <div class="col-md-6">
          <div class="card-body">
            <h5 class="card-title fs-6">  {{ (cartItem.productName.length>90)? (cartItem.productName | slice:0:90)+'...':(cartItem.productName) | titlecase  }}</h5>
            <p class="card-text">Quantity: {{ cartItem.quantity }}</p>
          </div>
        </div>
    
        <!-- Quantity & Remove Button -->
        <div class="col-md-3 d-flex align-items-center justify-content-end">
          <div class="quantity-controls">
            <button class="btn btn-outline-secondary btn-sm mb-2 my-1 ">-</button>
            <span class="mx-2 mb-2 my-1 ">{{ cartItem.quantity }}</span>
            <button class="btn btn-outline-secondary btn-sm  mb-2 my-1 " >+</button>
          </div>
          <button class="btn btn-danger btn-sm ms-3 mb-2 mx-3 " (click)="removeItem(cartItem.id)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="mt-3 d-flex justify-content-end">
 <button class="btn btn-warning " *ngIf="cartItems.length" (click)="placeOrder()"> Proceed to Checkout</button>
</div>
  </div>
  
  