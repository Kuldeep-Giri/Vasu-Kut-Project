
<div class="user-table-container p-4">
  <app-spinner *ngIf="loading"></app-spinner>
    <div class="p-4">
        <h3 class="fw-bold mb-1 fs-4 ">Manage Users</h3>
        <p class="text-muted mb-2 mb-md-0 fs-6">Manage your User, Ative, InActive, and all user in one place.</p>
      </div>
    <!-- ðŸ” Search Section -->
    <div class="search-box mb-3 row">
     <div class="col-sm-5 d-flex  mt-1 ">
        <input
        type="text"
        [(ngModel)]="searchTerm"
        placeholder="Search by username"
        class="form-control"
        />
      <button (click)="searchUsers()" class="searchBtn">Search</button>
     </div>
    <div class="col-sm-7  mt-1  d-flex justify-content-center">
      <div class=" ">
        <select [(ngModel)]="selectedRole" (ngModelChange)="searchUsers()" class="form-select">
            <option value="">All Roles</option>
            <option value="Buyer">Buyer</option>
            <option value="Seller">Seller</option>
          </select>
        
     </div>
      <div class="mx-2">
        <select [(ngModel)]="selectedStatus" (ngModelChange)="searchUsers()" class="form-select">
            <option value="">All Status</option>
            <option value="inactive">Active</option>
            <option value="active">Inactive</option>
          </select>
      </div>
    </div>
    </div>
  
    <!-- ðŸ§¾ Table Section (unchanged) -->
    <table class="user-table">
      <thead>
        <tr>
          <th>Sr No.</th>
          <th>UserName</th>
          <th>Role</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users; let i = index" >
          <td>{{ (pageNumber - 1) * pageSize + i + 1 }}</td>
          <td>{{ user.userName }}</td>
          <td>{{ user.role }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.phoneNumber }}</td>
          <td>
            <a class="toggle-link" (click)="toggle(user.id)" [ngClass]="user.isDisable ? 'active' : 'inactive'">
              {{ user.isDisable ? 'Active' : 'Inactive' }}
            </a>
          </td>
          
        </tr>
      </tbody>
    </table>
    <td *ngIf="!users.length" class="text-danger">Cannot find user</td>
    <!-- ðŸ”¢ Pagination -->
    <div class="pagination-controls">
      <div class="pagination-info">
        {{ pageSize }} per page â€¢ {{ (pageNumber - 1) * pageSize + 1 }} -
        {{ Math.min(pageNumber * pageSize, totalCount) }} of {{ totalCount }}
      </div>
  
      <div class="pagination-buttons">
        <button [disabled]="pageNumber === 1" (click)="prevPage()">Prev</button>
        <button
          *ngFor="let page of totalPagesArray"
          [ngClass]="{ active: page === pageNumber }"
          (click)="goToPage(page)">
          {{ page }}
        </button>
        <button [disabled]="pageNumber === totalPagesArray.length" (click)="nextPage()">Next</button>
      </div>
    </div>
  </div>
  